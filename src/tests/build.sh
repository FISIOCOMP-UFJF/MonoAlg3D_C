
if [ -n "$CUDA_FOUND" ]; then
    TEST_OPT_DEPS=gpu_utils
fi

TESTS_STATIC_DEPS="solvers ini_parser config tinyexpr ${TEST_OPT_DEPS} utils config_helpers vtk_utils yxml alg graph utils sds"
TESTS_DYNAMIC_DEPS="$CUDA_LIBRARIES $CRITERION_LIBRARIES z dl m logger"

COMPILE_EXECUTABLE "TestSolvers" "test_solvers.c" "" "$TESTS_STATIC_DEPS" "$TESTS_DYNAMIC_DEPS" "$CUDA_LIBRARY_PATH $CRITERION_LIBRARY_PATH $LIBRARY_OUTPUT_DIRECTORY" "-DCOMPILE_ZLIB $CRITERION_INCLUDE_PATH"
COMPILE_EXECUTABLE "TestMesh" "test_mesh.c" "" "$TESTS_STATIC_DEPS" "$TESTS_DYNAMIC_DEPS" "$CUDA_LIBRARY_PATH $CRITERION_LIBRARY_PATH $LIBRARY_OUTPUT_DIRECTORY" "-DCOMPILE_ZLIB $CRITERION_INCLUDE_PATH"
COMPILE_EXECUTABLE "TestSimulations" "test_simulations.c" "" "$TESTS_STATIC_DEPS" "$TESTS_DYNAMIC_DEPS" "$CUDA_LIBRARY_PATH $CRITERION_LIBRARY_PATH $LIBRARY_OUTPUT_DIRECTORY" "-DCOMPILE_ZLIB $CRITERION_INCLUDE_PATH"
COMPILE_EXECUTABLE "TestLibs" "test_libs.c" "" "$TESTS_STATIC_DEPS" "$TESTS_DYNAMIC_DEPS" "$CUDA_LIBRARY_PATH $CRITERION_LIBRARY_PATH $LIBRARY_OUTPUT_DIRECTORY" "-DCOMPILE_ZLIB $CRITERION_INCLUDE_PATH"
COMPILE_EXECUTABLE "SolverProfiler" "solver_profiler.c" "" "$TESTS_STATIC_DEPS" "$TESTS_DYNAMIC_DEPS" "$CUDA_LIBRARY_PATH $LIBRARY_OUTPUT_DIRECTORY" "-DCOMPILE_ZLIB"
